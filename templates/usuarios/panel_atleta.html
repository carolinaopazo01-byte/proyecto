{% extends "base/plantilla_atleta.html" %}
{% load static %}

{% block title %}Panel Atleta{% endblock %}

{# ============== SIDEBAR SOLO CON ASISTENCIA Y COMUNICADOS ============== #}
{% block sidebar %}
<ul class="navbar-nav sidebar sidebar-light accordion" id="accordionSidebar">

  <a class="sidebar-brand d-flex align-items-center justify-content-between px-3" href="{% url 'usuarios:panel_atleta' %}">
    <div class="sidebar-brand-icon">
      <img src="{% static 'img/logo/mi_logo.png' %}" alt="Logo" style="height:40px;object-fit:contain;">
    </div>
    <span class="small text-muted d-none d-lg-inline">Atleta</span>
  </a>

  <li class="nav-item cpc-mini-profile px-3 py-2">
    <div class="mp-wrap">
      <div class="mp-avatar" aria-hidden="true"><i class="fas fa-user"></i></div>
      <div class="mp-info">
        <div class="mp-name">{{ request.user.get_full_name|default:request.user.username }}</div>
        <div class="mp-mail">{{ request.user.email|default:"Sin correo" }}</div>
      </div>
    </div>
  </li>

  <div class="cpc-section-label">Mi panel</div>
  <li class="nav-item">
    <a class="nav-link" href="{% url 'atleta:asistencia_semana' %}?semana={% now 'Y-m-d' %}">
      <i class="fas fa-user-check"></i><span>Mi asistencia</span>
    </a>
  </li>

  <div class="cpc-section-label">Comunicaciones</div>
  <li class="nav-item">
    <a class="nav-link" href="{% url 'core:comunicados_list' %}">
      <i class="fas fa-bullhorn"></i><span>Comunicados</span>
    </a>
  </li>

  <hr class="sidebar-divider">
  <li class="nav-item">
    <a class="nav-link text-danger" href="{% url 'usuarios:logout' %}">
      <i class="fas fa-sign-out-alt"></i><span>Cerrar sesión</span>
    </a>
  </li>
  <div class="version text-center small">© {% now "Y" %}</div>
</ul>
{% endblock %}

{# =================== CSS compacto opcional =================== #}
{% block extra_css %}
<style>
  .cpc-section-label{
    padding:.65rem 1rem .25rem; font-size:.72rem; letter-spacing:.06em;
    text-transform:uppercase; color:#64748b; font-weight:800;
  }
  .page-head{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:.75rem}
  .page-head h4{margin:0;font-weight:800;font-size:1.05rem}
  .cards{display:grid;grid-template-columns:1fr;gap:14px}
  .card-tile{border:1px solid #e5e7eb;border-radius:12px;background:#fff;padding:14px;box-shadow:0 2px 6px rgba(0,0,0,.04)}
  .card-tile h6{margin:0 0 .35rem 0;font-weight:800}
  @media (min-width: 992px){ .cards{ grid-template-columns: 1fr 1fr; } }
</style>
{% endblock %}

{# =================== CONTENIDO: SOLO ASISTENCIA + COMUNICADOS =================== #}
{% block content %}
  <div class="page-head"><h4>Panel Atleta</h4></div>

  <div class="cards">
    {# ----- Acceso rápido a asistencia ----- #}
    <div class="card-tile">
      <h6><i class="fas fa-user-check mr-1"></i> Mi asistencia</h6>
      <p class="text-muted mb-2">Revisa tu asistencia de la semana.</p>
      <a class="btn btn-primary" href="{% url 'atleta:asistencia_semana' %}?semana={% now 'Y-m-d' %}">
        Ver asistencia
      </a>
    </div>

    {# ----- Comunicados recientes ----- #}
    <div class="card-tile">
      <h6><i class="fas fa-bullhorn mr-1"></i> Comunicados recientes</h6>

      {# Opción A: si tu include acepta limitar, pásale un límite #}
      {% include "base/includes/comunicados_online.html" with limit=5 %}


      <a class="btn btn-outline-primary btn-sm" href="{% url 'core:comunicados_list' %}">
        Ver todos los comunicados
      </a>
    </div>
  </div>
{% endblock %}

{% block extra_js %}{% endblock %}
