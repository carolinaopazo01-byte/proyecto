{% extends "base/plantilla.html" %}
{% block title %}Postulación{% endblock %}
{% block header %}Postulación de {{ obj.nombres }} {{ obj.apellidos }}{% endblock %}

{% block content %}
<div class="card p-3" style="max-width:960px">
  <div class="row g-2">
    <div class="col-md-4"><b>Estado:</b> {{ obj.get_estado_display }}</div>
    <div class="col-md-4"><b>Creado:</b> {{ obj.creado|date:"d/m/Y H:i" }}</div>
    <div class="col-md-4"><b>Modificado:</b> {{ obj.modificado|date:"d/m/Y H:i" }}</div>

    <div class="col-md-6"><b>RUT:</b> {{ obj.rut }}</div>
    <div class="col-md-6"><b>Fecha nac.:</b> {{ obj.fecha_nacimiento|date:"d/m/Y"|default:"—" }}</div>

    <div class="col-md-6"><b>Contacto:</b> {{ obj.email|default:"—" }} · {{ obj.telefono|default:"—" }}</div>
    <div class="col-md-6"><b>Comuna:</b> {{ obj.comuna|default:"—" }}</div>

    <div class="col-md-6"><b>Deporte de interés:</b> {{ obj.deporte_interes|default:"—" }}</div>
    <div class="col-md-6"><b>Sede de interés:</b> {{ obj.sede_interes|default:"—" }}</div>

    <div class="col-md-6"><b>Período:</b> {{ obj.periodo|default:"—" }}</div>
    <div class="col-md-6"><b>Origen:</b> {{ obj.origen|default:"—" }}</div>

    {% if obj.comentarios %}
    <div class="col-12">
      <b>Comentarios internos:</b>
      <pre style="white-space:pre-wrap; margin:0">{{ obj.comentarios }}</pre>
    </div>
    {% endif %}
  </div>

  <hr class="my-3">

  {# Acciones de estado + nota (tu view espera 'accion' con estos valores) #}
  <form method="post" class="d-flex gap-2 align-items-start">
    {% csrf_token %}
    <textarea name="nota" class="form-control" rows="2" placeholder="Agregar nota (opcional)"></textarea>
    <div class="btn-group" role="group">
      <button class="btn btn-secondary" name="accion" value="contactada">Contactada</button>
      <button class="btn btn-success"   name="accion" value="aceptada">Aceptar</button>
      <button class="btn btn-danger"    name="accion" value="rechazada">Rechazar</button>
      <button class="btn btn-light"     name="accion" value="reabrir">Reabrir</button>
    </div>
  </form>

  <div class="mt-3">
    <a class="btn btn-light" href="{{ back_to|default:'#' }}">Volver</a>
  </div>
</div>
{% endblock %}
