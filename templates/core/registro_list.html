{% extends "base/plantilla.html" %}
{% block title %}Postulaciones{% endblock %}
{% block header %}Postulaciones (Registro en línea){% endblock %}

{% block extra_css %}
<style>
  /* Cabecera */
  .page-head{ display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:.75rem; }
  .page-head-left{ display:flex; align-items:center; gap:10px; }

  /* Tabla */
  .table-wrap{ border:1px solid #e5e7eb; border-radius:12px; overflow:hidden; }
  .table{ margin-bottom:0; }
  .table thead th{ white-space:nowrap; background:#f8fafc; }
  .table td,.table th{ vertical-align:middle; }

  /* Estado como badge */
  .estado-badge{ font-weight:600; }

  /* Columna de acciones */
  .col-actions-th{ width:120px; text-align:right; }
  .col-actions-td{ text-align:right; }

  /* Botón de acción consistente */
  .btn-action{ padding:.35rem .6rem; line-height:1.1; border-radius:8px; font-size:.875rem; }
</style>
{% endblock %}

{% block content %}

<!-- Cabecera -->
<div class="page-head">
  <div class="page-head-left">
    <h5 class="mb-0">Postulaciones</h5>
  </div>
</div>

<!-- Tabla -->
<div class="table-wrap">
  <div class="table-responsive">
    <table class="table table-sm table-hover align-middle">
      <thead>
        <tr>
          <th>Fecha</th>
          <th>Nombre</th>
          <th>Programa</th>
          <th>Estado</th>
          <th class="col-actions-th">Acciones</th>
        </tr>
      </thead>
      <tbody>
        {% for p in items %}
          <tr>
            <td>{{ p.creado|date:"d/m/Y H:i" }}</td>
            <td>{{ p.nombres }} {{ p.apellidos }} <span class="text-muted">({{ p.rut }})</span></td>
            <td>{{ p.get_programa_display }}</td>
            <td>
              {% if p.estado == "PEND" %}
                <span class="badge estado-badge bg-warning text-dark">Pendiente</span>
              {% elif p.estado == "APRO" %}
                <span class="badge estado-badge bg-success">Aprobada</span>
              {% elif p.estado == "RECH" %}
                <span class="badge estado-badge bg-secondary">Rechazada</span>
              {% else %}
                <span class="badge estado-badge bg-light text-dark">{{ p.get_estado_display }}</span>
              {% endif %}
            </td>
            <td class="col-actions-td">
              <a class="btn btn-outline-primary btn-action" href="{% url 'core:registro_detail' p.id %}">
                <i class="fas fa-eye"></i> Ver
              </a>
            </td>
          </tr>
        {% empty %}
          <tr><td colspan="5" class="text-muted">Sin postulaciones.</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>

{% endblock %}
